<%# <h1 class="animated fadeInDown"><i class="icon icon-arrow-down"></i></h1> %>

<div class="select animated zoomIn">
    <!-- You can toggle select (disabled) -->
    <input type="radio" name="option">
    <i class="toggle icon icon-arrow-down"></i>
    <i class="toggle icon icon-arrow-up"></i>
    <span class="placeholder">Choose...</span>
    <label class="option">
        <input type="radio" name="option">
        <span class="title animated fadeIn"><i class="icon icon-speedometer"></i>Choose a Github Repository.....</span>
    </label>
    <% @repos.each do |repo| %>
        <label class="option">
            <input type="radio" name="option">
            <span class="title animated fadeIn" data-id="<%= repo['id'] %>" data-branch="<%= repo['clone_url'] %>" onclick="populatesBranches()" ><i class="fa-brands fa-github"></i> <%= repo["name"] %></span>
        </label>
    <% end %>
</div>
<script src="https://res.cloudinary.com/selae-learning/raw/upload/v1674270163/beicloud-assets/jquery.min_qqptdx.js"></script>
<script>
function populatesBranches(){
  console.log(event.target.dataset)
  let branch = event.target.dataset.branch
  let branch_id = event.target.dataset.id

    event.preventDefault()
    const url = "<%= clone_repo_path %>"
    let params = {repo_url: branch, id: branch_id }
    let postData = JSON.stringify(params)
    $.ajax({
        type: "POST",
        url: url,
        data: params,
        success: "success",
    });

 }

</script>
